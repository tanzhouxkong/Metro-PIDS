name = "metro-pids-cloud"
main = "src/index.js"
compatibility_date = "2024-01-01"

# 这里的 account_id 和 kv id 需要你在 Cloudflare 控制台/命令行创建后填写
# 获取方式：
#   1) 安装 wrangler:  npm install -g wrangler
#   2) 登录:          wrangler login
#   3) 创建 KV:       wrangler kv:namespace create METRO_PIDS_LINES
#   4) 将返回的 id 填到下面的 id 字段

[[kv_namespaces]]
binding = "LINES"

# D1 数据库：用于使用统计（telemetry），支持全量查询、按日期排序
# 创建：cd cloudflare && wrangler d1 create metro-pids-db
# 将返回的 database_id 填到下面，然后运行：wrangler d1 migrations apply metro-pids-db --remote
[[d1_databases]]
binding = "DB"
database_name = "metro-pids-db"
database_id = "a199a54b-78de-421d-8e2b-5d0930fd347c"


# 以下敏感信息请用 wrangler secret 配置（勿写入此文件，避免泄露）:
#   wrangler secret put CLOUD_TOKEN          # 云控后台写操作鉴权
#   wrangler secret put GITHUB_TOKEN        # GitHub API 密钥，用于避免未认证请求的速率限制（约 60 次/小时）；建议使用 Fine-grained PAT 或 classic token，权限仅需 repo/public
# 节假日接口（mxnzp.com）代理需配置 MXNZP_APP_ID、MXNZP_APP_SECRET：
#   wrangler secret put MXNZP_APP_ID
#   wrangler secret put MXNZP_APP_SECRET
# 执行上述命令后，按提示输入对应的 APPID / APPSECRET 即可。