# Metro PIDS Simulator (Web V3)

这是一个基于 Web 技术的地铁乘客信息显示系统 (PIDS) 模拟器。它包含一个用于操作和配置的**控制面板**，以及一个用于展示乘客信息的**显示端**。

该项目旨在模拟地铁车厢内的 LCD 动态地图显示屏，支持自定义线路、站点、换乘信息控制。

## ✨ 主要功能

*   **双屏架构**：控制端 (`control_panel.html`) 与显示端 (`display_window.html` / `index30.html`) 分离，通过 `BroadcastChannel` 实现毫秒级实时同步。
*   **多线路管理**：支持创建、切换和管理多条线路，每条线路拥有独立的站点和配置。
*   **灵活的线路配置**：
    *   支持 **单线 (Linear)** 和 **环线 (Loop)** 模式。
    *   支持 **上行/下行** 及 **内环/外环** 切换。
    *   自定义站点名称（中文/英文）。
    *   自定义换乘线路及颜色。
    *   支持设置站点“暂缓开通”或“跳停”。
*   **实时控制**：
    *   进站 / 出站 / 下一站 / 上一站 控制。
    *   开门方向指示（左/右/双侧）。
    *   键盘快捷键支持 (空格键下一步, A进站, D出站)。
*   **可视化编辑器**：
    *   拖拽排序站点。
    *   折叠式编辑面板。
    *   实时预览站点属性。
*   **数据管理**：
    *   支持 JSON 格式的配置导入与导出。
    *   浏览器本地存储 (LocalStorage) 自动保存进度。
*   **录制工具**：内置自动报站定时器，方便进行屏幕录制。

## 🚀 使用说明

1.  **启动系统**：
    *   在浏览器中打开 `control_panel.html`。
    *   点击控制面板中的 **"打开显示端窗口（PIDS）"** 按钮，弹出显示端页面。
    *   *建议将显示端窗口拖拽到副屏全屏显示，或调整为合适的分辨率。*

2.  **线路设置**：
    *   在左侧“线路设置”区域修改线路名称、主题色和运行模式。
    *   在“站点管理”区域添加或编辑站点。
    *   点击站点列表中的“铅笔”图标编辑站点，支持拖拽调整顺序。

3.  **运行控制**：
    *   **上一站/下一站**：切换当前目标站点。
    *   **进站 (A)**：模拟列车到达站点（显示“当前站”）。
    *   **出站 (D)**：模拟列车离开站点（显示“下一站”）。
    *   **下一步 (Space)**：自动在“进站”和“出站”状态间循环。

## 📂 文件结构

*   `control_panel.html`: **控制面板** - 管理员操作界面，包含所有设置和控制逻辑。
*   `index30.html` / `pids_display.html`: **显示端** - 模拟车厢屏幕的展示界面。
*   `*.json`: 预设的线路配置文件（如北京地铁1号线、上海地铁2号线等）。

## 🛠️ 技术栈

*   HTML5 / CSS3 (Flexbox, Grid)
*   JavaScript (ES6+)
*   BroadcastChannel API (跨窗口通信)
*   FontAwesome (图标库)

## ⚠️ 注意事项

*   请使用现代浏览器（Chrome, Edge, Firefox）以获得最佳体验。
*   由于使用了 `BroadcastChannel`，控制端和显示端必须在**同源**（同一个域名或同一个本地文件路径）下打开才能通信。

---
*Created by GitHub Copilot*
